{% extends 'base.html' %}
{% block title %} Lista de Pedidos {% endblock %}
{% block content %}
<div class="columns">
    <div class="column is-10 is-offset-1">
        <a href="{{url_for('pedidos.add_orden')}}" class="button is-success">
            <i class="fa-solid fa-plus"></i> &nbsp; Agregar Orden
        </a>
        <a href="{{url_for('pedidos.add_pedido')}}" class="button is-success">
            <i class="fa-solid fa-plus"></i> &nbsp; Agregar Pedido
        </a>
        <br><br>

        <table class="table is-fullwidth">
            <thead>
                <tr>
                    <th>ID Pedido</th>
                    <th>Pizzas</th>
                    <th>Repartidor</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>

                {% for pedido in pedidos %}
                    <tr>
                        <td>{{pedido.id}}</td>
                        <td>
                            {% for orden in ordenes %}
                                {% if pedido.orden_id == orden.id %}
                                    {% for pizza in pizzas %}
                                        {% if orden.pizza_id == pizza.id %}
                                            {{ pizza.nombre ~ " x " ~ orden.cantidad }}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>
                            {% for repartidor in repartidores %}
                                {% if pedido.repartidor_id == repartidor.id %}
                                    {{ repartidor.nombre }}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>
                            <a href="{{ url_for('pedidos.update_pedido', id=pedido.id) }}" class="button is-small is-link">
                                <i class="fa-solid fa-pen-to-square"></i>
                            </a>
                            <a href="{{ url_for('pedidos.delete_pedido', id=pedido.id) }}" class="button is-small is-danger">
                                <i class="fa-solid fa-trash"></i>
                            </a>  
                        </td>
                    </tr>
                                            
                {% endfor %}

            
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
